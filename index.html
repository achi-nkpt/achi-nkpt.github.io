<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyRail Smart Route | Best Way to Go</title>
    <style>
        :root { --primary: #003366; --accent: #ff9900; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding-bottom: 50px; }
        
        /* HEADER */
        header { background: var(--primary); color: white; padding: 1rem 5%; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .logo { font-size: 1.5rem; font-weight: bold; }

        /* SEARCH CONTAINER */
        .search-box { background: white; width: 90%; max-width: 600px; margin: 30px auto; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: var(--primary); text-align: center; }
        
        .input-group { position: relative; margin-bottom: 15px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; color: #555; }
        input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        input:focus { border-color: var(--accent); outline: none; }

        .options { display: flex; gap: 15px; margin-bottom: 20px; justify-content: center; }
        .radio-label { cursor: pointer; display: flex; align-items: center; gap: 5px; background: #eee; padding: 8px 15px; border-radius: 20px; font-weight: 500; }
        input[type="radio"]:checked + span { color: var(--primary); font-weight: bold; }

        button { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #e68a00; transform: translateY(-2px); }

        /* RESULTS */
        .result-card { background: white; max-width: 600px; margin: 20px auto; padding: 20px; border-radius: 10px; border-left: 6px solid var(--primary); box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: none; }
        .summary { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .total-price { font-size: 1.5rem; font-weight: bold; color: #28a745; }
        .total-time { font-size: 1.1rem; color: #666; }
        
        .step { display: flex; gap: 15px; margin-bottom: 15px; align-items: flex-start; }
        .step-icon { background: #eee; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0; }
        .step-content h4 { margin: 0 0 5px 0; }
        .step-content p { margin: 0; color: #666; font-size: 0.9rem; }
        
        /* Line Colors */
        .line-BTS { color: #76c043; }
        .line-MRT { color: #00236a; }
        .line-ARL { color: #8e1f2f; }
        .line-Walk { color: #777; }
    </style>
</head>
<body>

<header>
    <div class="logo">ðŸš€ EasyRail Super-App</div>
</header>

<div class="search-box">
    <h2>Where to?</h2>
    
    <div class="input-group">
        <label>Start Station</label>
        <input type="text" id="start" list="stations" placeholder="e.g. Siam">
    </div>

    <div class="input-group">
        <label>Destination</label>
        <input type="text" id="end" list="stations" placeholder="e.g. Chatuchak Park">
    </div>

    <div class="options">
        <label class="radio-label">
            <input type="radio" name="mode" value="time" checked> <span>âš¡ Fastest</span>
        </label>
        <label class="radio-label">
            <input type="radio" name="mode" value="price"> <span>ðŸ’° Cheapest</span>
        </label>
    </div>

    <button onclick="findRoute()">Find Best Route</button>
</div>

<datalist id="stations">
    <option value="Siam (BTS)">
    <option value="Asok (BTS)">
    <option value="Mo Chit (BTS)">
    <option value="Phaya Thai (BTS)">
    <option value="Sukhumvit (MRT)">
    <option value="Chatuchak Park (MRT)">
    <option value="Phetchaburi (MRT)">
    <option value="Makkasan (ARL)">
    <option value="Suvarnabhumi (ARL)">
</datalist>

<div id="result" class="result-card">
    <div class="summary">
        <div>
            <div class="total-price" id="res-price">à¸¿0</div>
            <div class="total-time" id="res-time">0 mins</div>
        </div>
        <div style="text-align: right; font-size: 0.9rem; color: #888;">Best Route</div>
    </div>
    <div id="steps-container"></div>
</div>

<script>
    // --- 1. THE GRAPH DATA (Mini-Bangkok Network) ---
    // Nodes = Stations. Edges = Connections {cost, time, type}
    // "Interchange" means walking between systems (e.g. Asok -> Sukhumvit)
    
    const network = {
        "Siam (BTS)": {
            "Asok (BTS)": { cost: 30, time: 8, line: "BTS", type: "ride" },
            "Phaya Thai (BTS)": { cost: 25, time: 5, line: "BTS", type: "ride" },
            "Mo Chit (BTS)": { cost: 44, time: 15, line: "BTS", type: "ride" }
        },
        "Asok (BTS)": {
            "Siam (BTS)": { cost: 30, time: 8, line: "BTS", type: "ride" },
            "Sukhumvit (MRT)": { cost: 0, time: 5, line: "Walk", type: "transfer" } // Walk 5 mins
        },
        "Sukhumvit (MRT)": {
            "Asok (BTS)": { cost: 0, time: 5, line: "Walk", type: "transfer" },
            "Phetchaburi (MRT)": { cost: 19, time: 3, line: "MRT", type: "ride" },
            "Chatuchak Park (MRT)": { cost: 35, time: 15, line: "MRT", type: "ride" }
        },
        "Phetchaburi (MRT)": {
            "Sukhumvit (MRT)": { cost: 19, time: 3, line: "MRT", type: "ride" },
            "Makkasan (ARL)": { cost: 0, time: 7, line: "Walk", type: "transfer" } // Walk 7 mins
        },
        "Makkasan (ARL)": {
            "Phetchaburi (MRT)": { cost: 0, time: 7, line: "Walk", type: "transfer" },
            "Phaya Thai (ARL)": { cost: 15, time: 5, line: "ARL", type: "ride" },
            "Suvarnabhumi (ARL)": { cost: 35, time: 22, line: "ARL", type: "ride" }
        },
        "Phaya Thai (ARL)": {
            "Makkasan (ARL)": { cost: 15, time: 5, line: "ARL", type: "ride" },
            "Phaya Thai (BTS)": { cost: 0, time: 4, line: "Walk", type: "transfer" }
        },
        "Phaya Thai (BTS)": {
            "Phaya Thai (ARL)": { cost: 0, time: 4, line: "Walk", type: "transfer" },
            "Siam (BTS)": { cost: 25, time: 5, line: "BTS", type: "ride" },
            "Mo Chit (BTS)": { cost: 35, time: 10, line: "BTS", type: "ride" }
        },
        "Mo Chit (BTS)": {
            "Siam (BTS)": { cost: 44, time: 15, line: "BTS", type: "ride" },
            "Phaya Thai (BTS)": { cost: 35, time: 10, line: "BTS", type: "ride" },
            "Chatuchak Park (MRT)": { cost: 0, time: 4, line: "Walk", type: "transfer" }
        },
        "Chatuchak Park (MRT)": {
            "Mo Chit (BTS)": { cost: 0, time: 4, line: "Walk", type: "transfer" },
            "Sukhumvit (MRT)": { cost: 35, time: 15, line: "MRT", type: "ride" }
        },
        "Suvarnabhumi (ARL)": {
            "Makkasan (ARL)": { cost: 35, time: 22, line: "ARL", type: "ride" }
        }
    };

    // --- 2. DIJKSTRA'S ALGORITHM (The Logic Engine) ---
    function findRoute() {
        const start = document.getElementById('start').value;
        const end = document.getElementById('end').value;
        const mode = document.querySelector('input[name="mode"]:checked').value; // 'time' or 'price'
        
        if (!network[start] || !network[end]) {
            alert("Station not found in this demo! Try 'Siam (BTS)' or 'Suvarnabhumi (ARL)'.");
            return;
        }

        // Setup
        const costs = {};
        const backtrace = {};
        const pq = new PriorityQueue();

        for (let node in network) costs[node] = Infinity;
        costs[start] = 0;
        pq.enqueue(start, 0);

        // Algorithm Loop
        while (!pq.isEmpty()) {
            const shortestStep = pq.dequeue();
            const currentNode = shortestStep.element;

            if (currentNode === end) break; // Found it!

            for (let neighbor in network[currentNode]) {
                const edge = network[currentNode][neighbor];
                // Weight depends on user choice: 'time' (mins) or 'price' (Baht)
                const weight = mode === 'time' ? edge.time : edge.cost;
                const newCost = costs[currentNode] + weight;

                if (newCost < costs[neighbor]) {
                    costs[neighbor] = newCost;
                    backtrace[neighbor] = { from: currentNode, details: edge };
                    pq.enqueue(neighbor, newCost);
                }
            }
        }

        // Reconstruct Path
        const path = [];
        let curr = end;
        while (curr !== start) {
            const step = backtrace[curr];
            if (!step) { alert("No route found!"); return; }
            path.unshift({ to: curr, ...step.details });
            curr = step.from;
        }

        displayResult(path, costs[end], mode);
    }

    // --- 3. HELPER: Priority Queue (Simple Version) ---
    class PriorityQueue {
        constructor() { this.items = []; }
        enqueue(element, priority) {
            const qElement = { element, priority };
            let added = false;
            for (let i = 0; i < this.items.length; i++) {
                if (this.items[i].priority > qElement.priority) {
                    this.items.splice(i, 0, qElement);
                    added = true;
                    break;
                }
            }
            if (!added) this.items.push(qElement);
        }
        dequeue() { return this.items.shift(); }
        isEmpty() { return this.items.length === 0; }
    }

    // --- 4. DISPLAY RESULT ---
    function displayResult(path, totalMetric, mode) {
        document.getElementById('result').style.display = 'block';
        const stepsDiv = document.getElementById('steps-container');
        stepsDiv.innerHTML = "";
        
        let totalPrice = 0;
        let totalTime = 0;

        path.forEach(step => {
            totalPrice += step.cost;
            totalTime += step.time;

            let icon = step.type === 'transfer' ? 'ðŸš¶' : 'ðŸš†';
            let title = step.type === 'transfer' ? `Walk to ${step.to}` : `Take ${step.line} to ${step.to}`;
            let desc = `${step.time} mins â€¢ ${step.cost > 0 ? 'à¸¿' + step.cost : 'Free'}`;
            
            stepsDiv.innerHTML += `
            <div class="step">
                <div class="step-icon">${icon}</div>
                <div class="step-content">
                    <h4 class="line-${step.line}">${title}</h4>
                    <p>${desc}</p>
                </div>
            </div>`;
        });

        document.getElementById('res-price').innerText = `à¸¿${totalPrice}`;
        document.getElementById('res-time').innerText = `${totalTime} mins`;
    }
</script>

</body>
</html>
