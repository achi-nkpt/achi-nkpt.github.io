<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyRail | Smart Transit Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --sidebar-bg: #0f172a; --primary: #2563eb; --accent: #f59e0b; --bg: #f1f5f9;
            /* Line Colors */
            --c-bts: #16a34a; --c-silom: #15803d; --c-mrt: #2563eb; --c-purple: #9333ea;
            --c-arl: #701a75; --c-red: #dc2626; --c-gold: #ca8a04; --c-yellow: #eab308; --c-pink: #db2777; --c-srt: #b45309;
        }
        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: #1e293b; height: 100vh; display: flex; overflow: hidden; }
        
        /* SIDEBAR */
        .sidebar { width: 280px; background: var(--sidebar-bg); color: white; padding: 25px; display: flex; flex-direction: column; gap: 20px; flex-shrink: 0; overflow-y: auto; }
        .logo { font-size: 1.5rem; font-weight: 800; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; color: white; text-decoration: none; }
        
        .nav-section { margin-bottom: 15px; }
        .nav-label { font-size: 0.7rem; text-transform: uppercase; color: #94a3b8; font-weight: 700; letter-spacing: 1px; margin-bottom: 8px; }
        
        .nav-btn { width: 100%; padding: 12px 15px; border: none; border-radius: 8px; background: rgba(255,255,255,0.05); color: #cbd5e1; text-align: left; font-family: inherit; font-size: 0.9rem; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 10px; font-weight: 500; margin-bottom: 5px; }
        .nav-btn:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-btn.active { background: var(--primary); color: white; font-weight: 600; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }
        .nav-btn.tool { border: 1px solid rgba(255,255,255,0.1); background: transparent; }

        /* MAIN CONTENT */
        .main { flex: 1; position: relative; overflow-y: auto; display: flex; flex-direction: column; }
        .hero { 
            height: 350px; flex-shrink: 0; position: relative;
            background: linear-gradient(to bottom, rgba(15,23,42,0.6), rgba(15,23,42,0.8)), url('https://images.unsplash.com/photo-1596715694723-a567674c0587?q=80&w=2000') center/cover;
        }
        
        .search-container { max-width: 900px; margin: -100px auto 40px; padding: 0 20px; position: relative; z-index: 10; width: 100%; box-sizing: border-box; }
        .search-card { background: white; padding: 35px; border-radius: 20px; box-shadow: 0 20px 40px -10px rgba(0,0,0,0.15); }
        
        h1 { margin: 0 0 10px 0; font-size: 1.8rem; font-weight: 800; color: var(--sidebar-bg); }
        p.sub { color: #64748b; margin-bottom: 25px; }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .input-group label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 0.9rem; }
        input { width: 100%; padding: 14px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; box-sizing: border-box; transition: 0.2s; }
        input:focus { border-color: var(--primary); outline: none; }

        .action-btn { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: 0.2s; }
        .action-btn:hover { background: #1d4ed8; }

        /* RESULTS AREA */
        .results-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; display: none; }
        .result-card { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; }
        .result-card.best { border: 2px solid var(--c-bts); background: #f0fdf4; }
        
        .res-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #e2e8f0; padding-bottom: 10px; }
        .tag { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; padding: 4px 8px; border-radius: 4px; }
        .tag.fast { background: #dbeafe; color: #1e40af; }
        .tag.cheap { background: #dcfce7; color: #166534; }
        
        .route-step { display: flex; gap: 12px; margin-bottom: 12px; font-size: 0.95rem; }
        .line-dot { width: 12px; height: 12px; border-radius: 50%; margin-top: 5px; flex-shrink: 0; }
        
        /* Colors */
        .c-bts { background: var(--c-bts); } .c-mrt { background: var(--c-mrt); } 
        .c-arl { background: var(--c-arl); } .c-srt { background: var(--c-srt); }
        .c-pink { background: var(--c-pink); } .c-yl { background: var(--c-yellow); }

        @media (max-width: 800px) { 
            body { flex-direction: column; height: auto; overflow: auto; }
            .sidebar { width: 100%; padding: 20px; box-sizing: border-box; }
            .hero { height: 250px; }
            .form-grid { grid-template-columns: 1fr; }
            .results-wrapper { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="sidebar">
    <a href="#" class="logo">üöÜ EasyRail TH</a>
    
    <div class="nav-section">
        <div class="nav-label">Search Mode</div>
        <button class="nav-btn active" onclick="setMode('station', this)">üöâ Station to Station</button>
        <button class="nav-btn" onclick="setMode('landmark', this)">üìç Landmark Search</button>
    </div>

    <div class="nav-section">
        <div class="nav-label">Filters</div>
        <button class="nav-btn" onclick="filterStations('All')">üîÑ Show All</button>
        <button class="nav-btn" onclick="filterStations('BTS')">üöÜ BTS Skytrain</button>
        <button class="nav-btn" onclick="filterStations('MRT')">üöá MRT Subway</button>
        <button class="nav-btn" onclick="filterStations('Airport')">‚úàÔ∏è Airport Links</button>
        <button class="nav-btn" onclick="filterStations('SRT')">üöÇ Intercity Train</button>
    </div>

    <div class="nav-section">
        <div class="nav-label">External Tools</div>
        <button class="nav-btn tool" onclick="window.open('https://www.railway.co.th/SRTTimetable/StationList', '_blank')">
            üïí SRT Timetable
        </button>
        <button class="nav-btn tool" onclick="window.open('https://www.bangkoktransitmap.com/', '_blank')">
            üó∫Ô∏è Interactive Map
        </button>
    </div>
</div>

<div class="main">
    <div class="hero"></div>
    
    <div class="search-container">
        <div class="search-card">
            <h1>Route Finder</h1>
            <p class="sub">The most complete database of Bangkok & Intercity trains.</p>

            <div class="form-grid">
                <div class="input-group">
                    <label>Origin</label>
                    <input type="text" id="start" list="stations-list" placeholder="Start Station...">
                </div>
                <div class="input-group">
                    <label>Destination</label>
                    <input type="text" id="end" list="stations-list" placeholder="Destination...">
                </div>
            </div>

            <button class="action-btn" onclick="calculate()">Search Route</button>

            <div id="results-area" class="results-wrapper">
                <div class="result-card best">
                    <div class="res-header">
                        <span class="tag fast">‚ö° Fastest Option</span>
                        <strong id="fast-price">‡∏ø0</strong>
                    </div>
                    <div id="fast-steps"></div>
                </div>
                <div class="result-card">
                    <div class="res-header">
                        <span class="tag cheap">üí∞ Cheaper Option</span>
                        <strong id="cheap-price">‡∏ø0</strong>
                    </div>
                    <div id="cheap-steps"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<datalist id="stations-list"></datalist>
<datalist id="landmarks-list">
    <option value="Siam Paragon">
    <option value="Central World">
    <option value="Icon Siam">
    <option value="Chatuchak Market">
    <option value="Jodd Fairs">
    <option value="Grand Palace">
    <option value="Khaosan Road">
    <option value="Suvarnabhumi Airport">
</datalist>

<script>
    // ==========================================
    // 1. THE GRAPH DATA (Nodes & Edges)
    // ==========================================
    
    // Station Data: Name, Line ID
    const stations = [
        // BTS Sukhumvit
        {n:"Khu Khot", l:"BTS"}, {n:"Wat Phra Sri Mahathat", l:"BTS"}, {n:"Ha Yaek Lat Phrao", l:"BTS"}, 
        {n:"Mo Chit", l:"BTS"}, {n:"Victory Monument", l:"BTS"}, {n:"Phaya Thai", l:"BTS"}, {n:"Siam", l:"BTS"},
        {n:"Asok", l:"BTS"}, {n:"Thong Lo", l:"BTS"}, {n:"Ekkamai", l:"BTS"}, {n:"On Nut", l:"BTS"}, 
        {n:"Bang Na", l:"BTS"}, {n:"Samrong", l:"BTS"}, {n:"Kheha", l:"BTS"},
        // BTS Silom
        {n:"National Stadium", l:"Silom"}, {n:"Sala Daeng", l:"Silom"}, {n:"Chong Nonsi", l:"Silom"}, 
        {n:"Saphan Taksin", l:"Silom"}, {n:"Krung Thon Buri", l:"Silom"}, {n:"Bang Wa", l:"Silom"},
        // MRT Blue
        {n:"Bang Sue", l:"MRT"}, {n:"Tao Poon", l:"MRT"}, {n:"Chatuchak Park", l:"MRT"}, {n:"Lat Phrao", l:"MRT"},
        {n:"Phahon Yothin", l:"MRT"}, {n:"Sukhumvit", l:"MRT"}, {n:"Phetchaburi", l:"MRT"}, {n:"Silom", l:"MRT"},
        {n:"Hua Lamphong", l:"MRT"}, {n:"Wat Mangkon", l:"MRT"}, {n:"Sanam Chai", l:"MRT"}, {n:"Tha Phra", l:"MRT"}, {n:"Lak Song", l:"MRT"},
        // MRT Purple
        {n:"Bang Son", l:"Purple"}, {n:"Nonthaburi Civic Center", l:"Purple"}, {n:"Khlong Bang Phai", l:"Purple"},
        // Yellow Line
        {n:"Hua Mak", l:"Yellow"}, {n:"Si Iam", l:"Yellow"},
        // Pink Line
        {n:"Lak Si", l:"Pink"}, {n:"Min Buri", l:"Pink"},
        // ARL
        {n:"Suvarnabhumi", l:"ARL"}, {n:"Lat Krabang", l:"ARL"}, {n:"Makkasan", l:"ARL"}, {n:"Ratchaprarop", l:"ARL"},
        // Red Line
        {n:"Don Mueang", l:"Red"}, {n:"Lak Si", l:"Red"}, {n:"Bang Khen", l:"Red"}, {n:"Rangsit", l:"Red"},
        // Gold Line
        {n:"Charoen Nakhon", l:"Gold"},
        // SRT (Intercity)
        {n:"Ayutthaya", l:"SRT"}, {n:"Lopburi", l:"SRT"}, {n:"Chiang Mai", l:"SRT"}, {n:"Hua Hin", l:"SRT"},
        {n:"Kanchanaburi", l:"SRT"}, {n:"Pattaya", l:"SRT"}, {n:"Chachoengsao", l:"SRT"}
    ];

    // Interchanges (The "Smart" Logic)
    // Maps: Station Name -> [Connected Lines]
    const connections = {
        "Siam": ["BTS", "Silom"],
        "Asok": ["BTS"], "Sukhumvit": ["MRT"], // Walkable
        "Mo Chit": ["BTS"], "Chatuchak Park": ["MRT"], // Walkable
        "Phaya Thai": ["BTS", "ARL"],
        "Makassan": ["ARL"], "Phetchaburi": ["MRT"], // Walkable
        "Bang Sue": ["MRT", "Red", "SRT"],
        "Tao Poon": ["MRT", "Purple"],
        "Sala Daeng": ["Silom"], "Silom": ["MRT"], // Walkable
        "Krung Thon Buri": ["Silom", "Gold"],
        "Wat Phra Sri Mahathat": ["BTS", "Pink"],
        "Lat Phrao": ["MRT", "Yellow"],
        "Samrong": ["BTS", "Yellow"],
        "Lak Si": ["Red", "Pink"],
        "Bang Son": ["Purple", "Red"],
        "Hua Mak": ["ARL", "Yellow"],
        "Lat Krabang": ["ARL", "SRT"]
    };

    // Manual Graph Edges for complex transfers (Simulated for this demo)
    // In a real app, this would be a full weighted graph.
    function getTransfer(line1, line2) {
        if (line1 === line2) return null;
        
        // BTS <-> MRT
        if((line1==="BTS" && line2==="MRT") || (line1==="MRT" && line2==="BTS")) return "Asok / Sukhumvit";
        // BTS <-> Silom
        if((line1==="BTS" && line2==="Silom") || (line1==="Silom" && line2==="BTS")) return "Siam (Cross Platform)";
        // BTS <-> ARL
        if((line1==="BTS" && line2==="ARL") || (line1==="ARL" && line2==="BTS")) return "Phaya Thai";
        // MRT <-> ARL
        if((line1==="MRT" && line2==="ARL") || (line1==="ARL" && line2==="MRT")) return "Phetchaburi / Makkasan";
        // Pink <-> BTS
        if((line1==="Pink" && line2==="BTS") || (line1==="BTS" && line2==="Pink")) return "Wat Phra Sri Mahathat";
        // Yellow <-> BTS
        if((line1==="Yellow" && line2==="BTS") || (line1==="BTS" && line2==="Yellow")) return "Samrong";
        // SRT <-> Red
        if((line1==="SRT" && line2==="Red") || (line1==="Red" && line2==="SRT")) return "Bang Sue / Don Mueang";
        
        return "Central Hub (Bang Sue/Siam)"; // Default fallback
    }

    // ==========================================
    // 2. UI LOGIC
    // ==========================================

    let searchMode = 'station';
    const landmarks = {
        "siam paragon": "Siam", "central world": "Siam", "icon siam": "Charoen Nakhon",
        "chatuchak market": "Chatuchak Park", "grand palace": "Sanam Chai",
        "suvarnabhumi airport": "Suvarnabhumi", "khaosan road": "Sanam Chai"
    };

    function init() { populateList('All'); }

    function populateList(filter) {
        const dl = document.getElementById('stations-list');
        dl.innerHTML = "";
        stations.forEach(s => {
            if (filter === 'All' || s.l === filter || (filter === 'Airport' && (s.l==='ARL' || s.l==='Red'))) {
                let opt = document.createElement('option');
                opt.value = s.n;
                dl.appendChild(opt);
            }
        });
    }

    function filterStations(type) {
        populateList(type);
        document.getElementById('start').value = "";
        document.getElementById('end').value = "";
    }

    function setMode(mode, btn) {
        searchMode = mode;
        const endInput = document.getElementById('end');
        document.querySelectorAll('.sidebar .nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        if(mode === 'landmark') {
            endInput.setAttribute('list', 'landmarks-list');
            endInput.placeholder = "Enter Landmark...";
        } else {
            endInput.setAttribute('list', 'stations-list');
            endInput.placeholder = "Destination Station...";
        }
    }

    function calculate() {
        const startRaw = document.getElementById('start').value;
        let endRaw = document.getElementById('end').value;
        const resultArea = document.getElementById('results-area');

        if(!startRaw || !endRaw) { alert("Please fill in both fields"); return; }

        // Landmark Logic
        let landmarkNote = "";
        if(searchMode === 'landmark') {
            const key = endRaw.toLowerCase();
            let found = false;
            for(let k in landmarks) {
                if(key.includes(k)) {
                    endRaw = landmarks[k];
                    landmarkNote = ` (Walk to ${k})`;
                    found = true; break;
                }
            }
            if(!found) { alert("Landmark not found"); return; }
        }

        // Find Station Data
        const startSt = stations.find(s => s.n === startRaw);
        const endSt = stations.find(s => s.n === endRaw);

        if(!startSt || !endSt) { alert("Station not found in database"); return; }

        resultArea.style.display = 'grid';

        // --- CALCULATION LOGIC ---
        const transfer = getTransfer(startSt.l, endSt.l);
        const isSameLine = startSt.l === endSt.l;

        // 1. FASTEST ROUTE GENERATION
        let fastHTML = `
            <div class="route-step">
                <div class="line-dot" style="background:#333"></div>
                <div>Start at <b>${startSt.n}</b></div>
            </div>`;
        
        if(isSameLine) {
            fastHTML += `
            <div class="route-step">
                <div class="line-dot c-${startSt.l.toLowerCase()}"></div>
                <div>Ride <b>${startSt.l} Line</b> direct</div>
            </div>`;
        } else {
            fastHTML += `
            <div class="route-step">
                <div class="line-dot c-${startSt.l.toLowerCase()}"></div>
                <div>Take <b>${startSt.l} Line</b></div>
            </div>
            <div class="route-step">
                <div class="line-dot" style="background:#f59e0b"></div>
                <div>Transfer at <b>${transfer}</b></div>
            </div>
            <div class="route-step">
                <div class="line-dot c-${endSt.l.toLowerCase()}"></div>
                <div>Switch to <b>${endSt.l} Line</b></div>
            </div>`;
        }
        
        fastHTML += `
            <div class="route-step">
                <div class="line-dot" style="background:#333"></div>
                <div>Arrive <b>${endSt.n}</b> ${landmarkNote}</div>
            </div>`;

        // 2. PRICES
        let fastPrice = isSameLine ? 45 : 78;
        let cheapPrice = isSameLine ? 45 : 55; // Cheaper usually means avoiding expensive BTS extensions or using buses (simulated)

        document.getElementById('fast-steps').innerHTML = fastHTML;
        document.getElementById('fast-price').innerText = `‡∏ø${fastPrice}`;
        
        // Simulating "Cheaper" as the same route but maybe bus/van suggestion or just slower rail
        document.getElementById('cheap-steps').innerHTML = fastHTML + `<div style="margin-top:10px; font-size:0.8rem; color:#64748b;">*Tip: Use Rabbit Card for 10% off</div>`;
        document.getElementById('cheap-price').innerText = `‡∏ø${cheapPrice}`;
    }

    init();
</script>

</body>
</html>
